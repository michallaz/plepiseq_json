{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/michallaz/plepiseq_json/main/output_subschemes_phylogenetics/sequence_filtering_data.json",
  "type": "array",
  "description": "Wyniki filtrowania sekwencji (jedna pozycja na sekwencję).",
  "items": {
    "type": "object",
    "properties": {
      "id": {
        "type": "string",
        "minLength": 1,
        "description": "Identyfikator sekwencji.",
        "$comment": "Dowolny niepusty ciąg znaków."
      },
      "number_of_N": {
        "type": "integer",
        "minimum": 0,
        "description": "Liczba znaków 'N' w sekwencji.",
        "$comment": "Wartość >= 0."
      },
      "number_of_ambigous": {
        "type": "integer",
        "minimum": 0,
        "description": "Liczba znaków innych niż A,T,C,G,N w sekwencji.",
        "$comment": "Wartość >= 0."
      },
      "status": {
        "type": "string",
        "enum": ["tak", "nie"],
        "description": "Czy sekwencja jest analizowana (tak) czy odrzucona (nie)."
      },
      "error_message": {
        "type": "string",
        "minLength": 1,
        "description": "Powód odrzucenia sekwencji.",
        "$comment": "Wymagany, gdy status='nie'."
      }
    },
    "required": ["id", "number_of_N", "number_of_ambigous", "status"],
    "additionalProperties": false,
    "allOf": [
      {
        "if": { "properties": { "status": { "const": "nie" } }, "required": ["status"] },
        "then": { "required": ["error_message"] }
      }
    ]
  }
}

